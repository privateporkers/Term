@{
    ViewData["Title"] = "Index";
}
<head>
    <script src="~/Scripts/p5.js" type="text/javascript"></script>
    <script src="~/Scripts/p5.dom.js" type="text/javascript"></script>
    <script src="~/Scripts/sketch.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="~/Stylesheets/style.css">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
</head>

<body>
    <div id="console">
        <script type="text/javascript">
            var input;
            var row;
            var termTable;
            var div1;
            var test = false;
            var placeHolder;
            var echoChange;
            var wordCheck;
            var baseWord = "hello";
            var commandStrTwo;

            function setup() {
                noCanvas();
                termTable = createElement('table');
                termTable.parent("console");

                placeHolder = createP('>');
                placeHolder.parent("console");

                div1 = createDiv();
                div1.parent("console");
                div1.id('bar');

                input = createInput();
                input.parent(div1);

                input.elt.focus();

                //function creates a new row for the termTable 'termTable' when pressed enter
                input.changed(terminal);
            }

            function createRow(str) {
                row = createElement('tr');
                row.parent(termTable);
                row.html(str);
            }

            function terminal() {
                textChange();

                //adds text and styling to each row
                //row.html('>You typed: ' + input.value());
                var command = input.value();
                command = command.trim();
                var index = command.indexOf(' ');
                commandStrTwo = command.substring(index + 1);
                var commandStrOne = command.substring(0, index);

                //command conditionals
                if (commandStrOne == "echo") {
                    if (wordCheck()) {
                        echoCom(commandStrTwo);
                    }
                    else {
                        echoCom(echoChange);
                    }
                }
                else if (command == "clear") {
                    clearCom();
                }
                else if (command == "help") {
                    helpCom();
                }
                else if (commandStrOne == "text") {
                    textCom(commandStrTwo);
                }
                else {
                    notCom(command);
                }

                input.value('');
            }

            function textCom(str) {
                if (str == "gg") {
                    test = true;
                }
                createRow('>text ' + str);
            }

            function textChange() {
                //var rand = Math.trunc(random(1, 3));
                var rand = 1;
                if (rand == 1) {
                    echoChange = "hll";
                }
                else if (rand == 2) {
                }
                else if (rand == 3) {
                }
            }

            function wordCheck() {
                if (test) {
                    return true;
                }
                return false;
            }

            function randWord() {
                var func = randCase();
                if (func == 1) {
                    echoChange = "yyo";
                }
            }
            function keyPressed() {
                if (keyCode == ENTER && input.value() == '') {
                    createRow('>');
                }
            }

            function randCase() {
                var rand = Math.trunc(random(1, 3));
                return rand;
            }

            function echoCom(str) {
                if (str.length > 35) {
                    createRow('>Error: Word to long to echo!')
                }
                else {
                    createRow('>' + str);
                }
            }

            function helpCom() {
                createRow('echo [message]');
                createRow('clear');
            }

            function clearCom() {
                termTable.remove();
                div1.remove();
                input.remove();
                placeHolder.remove();

                termTable = createElement('table');
                termTable.parent("console");

                placeHolder = createP('>');
                placeHolder.parent("console");

                div1 = createDiv();
                div1.parent("console");
                div1.id('bar');

                input = createInput();
                input.parent(div1);

                input.elt.focus();

                input.changed(terminal);
            }

            function notCom(str) {
                if (str.length > 30) {
                    str = str.substring(0, 30) + "..."
                }
                if (str == '') {
                    createRow('>');
                }
                else {
                    createRow('>Error: \'' + str + '\' is not a command!');
                }
            }

        </script>
    </div>
</body>
